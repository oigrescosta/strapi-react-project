[{"B:\\My Projects\\strapi-react-project\\ig-frontend\\src\\index.js":"1","B:\\My Projects\\strapi-react-project\\ig-frontend\\src\\reportWebVitals.js":"2","B:\\My Projects\\strapi-react-project\\ig-frontend\\src\\App.js":"3","B:\\My Projects\\strapi-react-project\\ig-frontend\\src\\components\\Post.js":"4","B:\\My Projects\\strapi-react-project\\ig-frontend\\src\\pages\\Home.js":"5","B:\\My Projects\\strapi-react-project\\ig-frontend\\src\\pages\\Create.js":"6","B:\\My Projects\\strapi-react-project\\ig-frontend\\src\\components\\Nav.js":"7","B:\\My Projects\\strapi-react-project\\ig-frontend\\src\\pages\\SinglePost.js":"8","B:\\My Projects\\strapi-react-project\\ig-frontend\\src\\context\\UserContext.js":"9","B:\\My Projects\\strapi-react-project\\ig-frontend\\src\\pages\\Login.js":"10","B:\\My Projects\\strapi-react-project\\ig-frontend\\src\\pages\\Signup.js":"11","B:\\My Projects\\strapi-react-project\\ig-frontend\\src\\context\\LikesContext.js":"12"},{"size":733,"mtime":1613429633257,"results":"13","hashOfConfig":"14"},{"size":362,"mtime":499162500000,"results":"15","hashOfConfig":"14"},{"size":829,"mtime":1612723435041,"results":"16","hashOfConfig":"14"},{"size":867,"mtime":1611872347545,"results":"17","hashOfConfig":"14"},{"size":843,"mtime":1612302939210,"results":"18","hashOfConfig":"14"},{"size":2235,"mtime":1612907949915,"results":"19","hashOfConfig":"14"},{"size":637,"mtime":1612723544930,"results":"20","hashOfConfig":"14"},{"size":4800,"mtime":1613428177616,"results":"21","hashOfConfig":"14"},{"size":327,"mtime":1612476261431,"results":"22","hashOfConfig":"14"},{"size":2084,"mtime":1612723994659,"results":"23","hashOfConfig":"14"},{"size":1852,"mtime":1612724760493,"results":"24","hashOfConfig":"14"},{"size":1565,"mtime":1613429982834,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"d6x78h",{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"35","usedDeprecatedRules":"30"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"44","usedDeprecatedRules":"30"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47","usedDeprecatedRules":"30"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"50","usedDeprecatedRules":"30"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"53","usedDeprecatedRules":"30"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"56"},"B:\\My Projects\\strapi-react-project\\ig-frontend\\src\\index.js",[],"B:\\My Projects\\strapi-react-project\\ig-frontend\\src\\reportWebVitals.js",[],["57","58"],"B:\\My Projects\\strapi-react-project\\ig-frontend\\src\\App.js",[],"B:\\My Projects\\strapi-react-project\\ig-frontend\\src\\components\\Post.js",["59","60"],"import React from 'react'\r\n\r\nconst post = {\r\n    \"id\": 1,\r\n    \"description\": \"Me playing squash a few years ago\",\r\n    \"likes\": 20,\r\n    \"author\": null,\r\n    \"published_at\": \"2021-01-26T22:17:28.642Z\",\r\n    \"created_at\": \"2021-01-26T22:17:22.117Z\",\r\n    \"updated_at\": \"2021-01-26T22:17:28.672Z\",\r\n    \"image\": {\r\n        \"url\": \"/uploads/sample_f33df657b7.jpg\",\r\n    }\r\n}\r\n\r\nconst API_URL = 'http://localhost:1337'\r\n\r\nconst formatImageUrl = (url) => `${API_URL}${url}`\r\n\r\nconst Post = ({likes, description, url}) => {\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"Post\">\r\n                <img className=\"Post__Image\" src={formatImageUrl(url)} />\r\n                <h4>{description}</h4>\r\n                <div>\r\n                   <span>Likes: {likes}</span> \r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Post\r\n","B:\\My Projects\\strapi-react-project\\ig-frontend\\src\\pages\\Home.js",[],"B:\\My Projects\\strapi-react-project\\ig-frontend\\src\\pages\\Create.js",[],"B:\\My Projects\\strapi-react-project\\ig-frontend\\src\\components\\Nav.js",[],"B:\\My Projects\\strapi-react-project\\ig-frontend\\src\\pages\\SinglePost.js",["61","62","63","64"],"import React, {useState, useEffect, useContext} from 'react'\r\nimport Post from '../components/Post'\r\n\r\nimport {UserContext} from '../context/UserContext'\r\n\r\nconst SinglePost = ({match, history}) => {\r\n    const {id} = match.params\r\n    console.log(\"id\", id)\r\n\r\n    const {user, setUser} = useContext(UserContext)\r\n    console.log(\"user\", user)\r\n    console.log(\"setUser\", setUser)\r\n\r\n    const [post, setPost] = useState({})\r\n    const [loading, setLoading] = useState(true)\r\n    const [edit, setEdit] = useState(false)\r\n\r\n    const [description, setDescription] = useState('')\r\n\r\n    const fetchPost = async () => {\r\n        const response = await fetch(`http://localhost:1337/posts/${id}`)\r\n        const data = await response.json()\r\n        console.log(\"data\", data)\r\n        setPost(data)\r\n        setDescription(data.description)\r\n        setLoading(false)\r\n    }\r\n\r\n    const handleDelete = async () => {\r\n        const response = await fetch(`http://localhost:1337/posts/${id}`, {\r\n            method: 'DELETE',\r\n            headers: {\r\n                'Authorization': `Bearer ${user.jwt}`\r\n            },\r\n        })\r\n        const data = await response.json()\r\n        history.push('/')\r\n    }\r\n\r\n    const handleEditSubmit = async (event) => {\r\n        event.preventDefault()\r\n        console.log(\"handleEditSubmit\")\r\n\r\n        const response = await fetch(`http://localhost:1337/posts/${id}`, {\r\n            method: 'PUT',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': `Bearer ${user.jwt}`\r\n            },\r\n            body: JSON.stringify({\r\n                description\r\n            })\r\n        })\r\n\r\n        const data = await response.json()\r\n        fetchPost()\r\n        console.log(\"handleEditSubmit data\", data)\r\n    }\r\n\r\n    const handleLike = async () => {\r\n        try {\r\n            const response = await fetch('http://localhost:1337/likes', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Authorization': `Bearer ${user.jwt}`,\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    post: parseInt(id)\r\n                })\r\n            })\r\n            fetchPost()\r\n        } catch(err) {\r\n            console.log(\"Exception\", err)\r\n        }\r\n    }\r\n\r\n    const handleRemoveLike = async () => {\r\n        try {\r\n            const response = await fetch(`http://localhost:1337/likes/${id}`, {\r\n                method: 'DELETE',\r\n                headers: {\r\n                    'Authorization': `Bearer ${user.jwt}`,\r\n                }\r\n            })\r\n            fetchPost()\r\n        } catch(err) {\r\n            console.log(\"Exception\", err)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchPost()\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"Post\">\r\n            {loading && <p>Loading...</p>}\r\n\r\n            {!loading &&   \r\n                <>    \r\n                    {post.id && \r\n                        <>\r\n                            <Post \r\n                                description={post.description}\r\n                                url={post.image && post.image.url}\r\n                                likes={post.likes} \r\n                            />\r\n\r\n                            {user && \r\n                                <>\r\n                                    <button onClick={handleLike}>Like</button>\r\n                                    <button onClick={handleRemoveLike}>Remove Like</button>\r\n                                </>  \r\n                            }\r\n\r\n                            {user &&\r\n                                <>\r\n                                    <button onClick={handleDelete}>Delete this Post</button> \r\n                                    <button onClick={() => setEdit(true)}>Edit this Post</button> \r\n                                    {edit &&\r\n                                        <form onSubmit={handleEditSubmit}>\r\n                                            <input \r\n                                                value={description} \r\n                                                onChange={(event) => setDescription(event.target.value)} \r\n                                                placeholder=\"New description\" \r\n                                            />\r\n                                            <button>Confirm</button>\r\n                                        </form>\r\n                                    }\r\n                                </>\r\n                            }\r\n                        </>\r\n                    }  \r\n\r\n                    {!post.id && <p>404 - Page not found</p>}      \r\n                </>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SinglePost\r\n","B:\\My Projects\\strapi-react-project\\ig-frontend\\src\\context\\UserContext.js",["65"],"import React, {createContext, useState} from 'react'\r\n\r\nexport const UserContext = createContext(null)\r\n\r\nexport default ({children}) => {\r\n\r\n    const [user, setUser] = useState(null)\r\n\r\n    return (\r\n        <UserContext.Provider value={{user, setUser}}>\r\n            {children}\r\n        </UserContext.Provider>\r\n    )\r\n}\r\n\r\n","B:\\My Projects\\strapi-react-project\\ig-frontend\\src\\pages\\Login.js",["66"],"import React, {useState, useContext, useEffect} from 'react'\r\nimport {UserContext} from '../context/UserContext'\r\n\r\nconst Login = ({history}) => {\r\n\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [error, setError] = useState('')\r\n\r\n    const {user, setUser} = useContext(UserContext)\r\n    console.log(\"user\", user)\r\n\r\n    useEffect(() => {\r\n        if(user) {\r\n            history.push('/')\r\n        }\r\n    }, [user])\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault()\r\n\r\n        try {\r\n            const response = await fetch('http://localhost:1337/auth/local/', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    identifier: email,\r\n                    password\r\n                })\r\n            })\r\n\r\n            const data = await response.json()\r\n\r\n            console.log(\"data\", data)\r\n\r\n            if(data.message) {\r\n                setError(data.message[0].messages[0].message)\r\n\r\n                return \r\n            }\r\n\r\n            setUser(data)\r\n\r\n        } catch(err) {\r\n            setError('Something went wrong' + err)\r\n        }\r\n\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <h2>Login</h2>\r\n\r\n            <form onSubmit={handleSubmit}>\r\n                <input \r\n                    type=\"email\"\r\n                    value={email}\r\n                    onChange={(e) => {\r\n                        setError('')\r\n                        setEmail(e.target.value)\r\n                    }}\r\n                />\r\n                <input \r\n                    type=\"password\"\r\n                    value={password}\r\n                    onChange={(e) => {\r\n                        setError('')\r\n                        setPassword(e.target.value)\r\n                    }}\r\n                />\r\n                <button>Login</button>\r\n            </form>\r\n\r\n            {error && <p>{error}</p>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login\r\n","B:\\My Projects\\strapi-react-project\\ig-frontend\\src\\pages\\Signup.js",["67"],"import React, {useState, useContext, useEffect} from 'react'\r\nimport {UserContext} from '../context/UserContext'\r\n\r\nconst Signup = ({history}) => {\r\n\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [error, setError] = useState('')\r\n\r\n    const {user, setUser} = useContext(UserContext)\r\n\r\n    useEffect(() => {\r\n        if(user) {\r\n            history.push('/')\r\n        }\r\n    }, [user])\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault()\r\n\r\n        try {\r\n            const response = await fetch('http://localhost:1337/auth/local/register', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    username: email, \r\n                    email,\r\n                    password\r\n                })\r\n            })\r\n\r\n            const data = await response.json()\r\n\r\n            if(data.message) {\r\n                setError(data.message[0].messages[0].message)\r\n\r\n                return\r\n            }\r\n\r\n            setUser(data)\r\n\r\n            console.log(\"data\", data)\r\n        } catch(err) {\r\n            setError('Something went wrong' + err)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n        <h2>Sign up</h2>\r\n\r\n        <form  onSubmit={handleSubmit}>\r\n            <input\r\n                type=\"email\"\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n            />\r\n            <input\r\n                type=\"password\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n            />\r\n            <button>Sign up</button>\r\n        </form>\r\n\r\n        {error && <p>{error}</p>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Signup\r\n","B:\\My Projects\\strapi-react-project\\ig-frontend\\src\\context\\LikesContext.js",["68"],"import React, {createContext, useState, useEffect, useContext} from 'react'\r\nimport {UserContext} from './UserContext'\r\n\r\nexport const LikesContext = createContext(null)\r\n\r\nexport default ({children}) => {\r\n\r\n    const {user} = useContext(UserContext)\r\n\r\n    const [likesGiven, setLikesGiven] = useState([])\r\n    const [likesReceived, setLikesReceived] = useState([])\r\n\r\n    useEffect(() => {\r\n        if(user) {\r\n            const loadLikesGiven = async () => {\r\n                const response = await fetch(`http://localhost:1337/likes/given?user=${user.user.id}`, {\r\n                    headers: {\r\n                        'Authorization': `Bearer ${user.jwt}`\r\n                    }\r\n                })\r\n                const data = await response.json()\r\n                setLikesGiven(data)\r\n            }\r\n            loadLikesGiven()\r\n\r\n            const loadLikesReceived = async () => {\r\n                const response = await fetch(`http://localhost:1337/likes/received?post.author=${user.user.id}`, {\r\n                    headers: {\r\n                        'Authorization': `Bearer ${user.jwt}`\r\n                    }\r\n                })\r\n                const data = await response.json()\r\n                setLikesReceived(data)\r\n            }\r\n            loadLikesReceived()\r\n        }\r\n    }, [user])\r\n\r\n    console.log(\"likesGiven\", likesGiven)\r\n    console.log(\"likesReceived\", likesReceived)\r\n\r\n    return (\r\n        <LikesContext.Provider value={{likesGiven, likesReceived}}>\r\n            {children}\r\n        </LikesContext.Provider>\r\n    )\r\n}\r\n",{"ruleId":"69","replacedBy":"70"},{"ruleId":"71","replacedBy":"72"},{"ruleId":"73","severity":1,"message":"74","line":3,"column":7,"nodeType":"75","messageId":"76","endLine":3,"endColumn":11},{"ruleId":"77","severity":1,"message":"78","line":25,"column":17,"nodeType":"79","endLine":25,"endColumn":74},{"ruleId":"73","severity":1,"message":"80","line":36,"column":15,"nodeType":"75","messageId":"76","endLine":36,"endColumn":19},{"ruleId":"73","severity":1,"message":"81","line":62,"column":19,"nodeType":"75","messageId":"76","endLine":62,"endColumn":27},{"ruleId":"73","severity":1,"message":"81","line":80,"column":19,"nodeType":"75","messageId":"76","endLine":80,"endColumn":27},{"ruleId":"82","severity":1,"message":"83","line":94,"column":8,"nodeType":"84","endLine":94,"endColumn":10,"suggestions":"85"},{"ruleId":"86","severity":1,"message":"87","line":5,"column":1,"nodeType":"88","endLine":14,"endColumn":2},{"ruleId":"82","severity":1,"message":"89","line":17,"column":8,"nodeType":"84","endLine":17,"endColumn":14,"suggestions":"90"},{"ruleId":"82","severity":1,"message":"89","line":16,"column":8,"nodeType":"84","endLine":16,"endColumn":14,"suggestions":"91"},{"ruleId":"86","severity":1,"message":"87","line":6,"column":1,"nodeType":"88","endLine":47,"endColumn":2},"no-native-reassign",["92"],"no-negated-in-lhs",["93"],"no-unused-vars","'post' is assigned a value but never used.","Identifier","unusedVar","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","'data' is assigned a value but never used.","'response' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'fetchPost'. Either include it or remove the dependency array.","ArrayExpression",["94"],"import/no-anonymous-default-export","Assign arrow function to a variable before exporting as module default","ExportDefaultDeclaration","React Hook useEffect has a missing dependency: 'history'. Either include it or remove the dependency array.",["95"],["96"],"no-global-assign","no-unsafe-negation",{"desc":"97","fix":"98"},{"desc":"99","fix":"100"},{"desc":"99","fix":"101"},"Update the dependencies array to be: [fetchPost]",{"range":"102","text":"103"},"Update the dependencies array to be: [history, user]",{"range":"104","text":"105"},{"range":"106","text":"105"},[2820,2822],"[fetchPost]",[468,474],"[history, user]",[438,444]]